# V1.2.0版本后台更新日志

## 更新说明

1. 增加排班管理功能，支持导入排班、手动添加排班等操作，可以管理和显示队列上班状况；
2. 将医生管理从分诊台管理中分离出来单独进行管理；
3. 修改队列选择可登陆医生的功能，支持按照科室添加医生以及模糊查询后添加医生等操作；
4. 增加叫号器的IP检查，所有叫号器的IP不能相同；
5. 叫号器取消医生登录的限制；
6. 叫号器增加延后患者的功能；
7. 叫号器显示的队列和排班管理关联起来。登录叫号器后，页面默认显示当天有排班的队列；
8. 修改账号登录逻辑，增加后台管理的登录限制，解决使用分诊台账号也能登录后台的问题；
9. 增加取号机的终端管理功能，支持查询、修改、删除取号机，以及配置取号机打印设置等功能；
10. 支持在取号机上以刷卡、无卡、预约等形式取号的功能；
11. 队列策略管理中增加工作天数字段；
12. 修复医生叫号时前端展示模板的内容和语音播报内容不一致的问题；
13. 在前端模板中显示医生信息时，增加显示医生状态和医生擅长等信息；
14. 修改数据库中患者的激活时间datetime为datetime类型，并修改了患者排序的计算方式。


## 更新日志

### 2017-09-07

1. 修改MSSQL导入排班信息时不能导入的bug（主要原因在于MSSQL数据库查询后date类型会变成Unicode字符串，不能直接进行时间相关的操作）；
2. 修改导入排班时如果分诊台没有队列时出现的导入失败问题；
3. 修改分诊台被删除后排班管理界面也会显示该被删除分诊台下队列信息的问题；
4. 修复取号机发送心跳请求时更换分诊台后队列显示异常的问题。


### 2017-09-06

1. 增加获取MySQL、MSSQL、Oracle三种数据库默认配置信息的接口；
2. 修复使用MSSQL和Oracle数据库导入医生信息和排班信息时的异常问题；
3. 修改schedule和schedule_temp的表字段，解决不能从Oracle数据库中导入数据的问题。


### 2017-09-04

1. 修改分诊台新增患者后序号一直显示为0的bug；
2. 取号机取号接口返回时增加更多的患者信息；


### 2017-09-01

1. 修复医生叫号时前端展示模板的内容和语音播报内容不一致的问题；
2. 在前端模板中显示医生信息时，增加显示医生状态和医生擅长等信息；
3. 修改数据库中患者的激活时间datetime为datetime类型，并修改了患者排序的计算方式；
4. 修改取号机打印小票的管理，支持在小票上显示队列信息、患者信息、打印样式信息等；
5. 修改worker表，增加speciality字段；
6. 增加取号机打印设置的style表。


### 2017-08-30

1. 叫号器取消医生登录的限制；
2. 叫号器增加延后患者的功能；
3. 叫号器显示的队列和排班管理关联起来。登录叫号器后，页面默认显示当天有排班的队列；
4. 队列策略管理中增加工作天数字段。


### 2017-08-29

1. 修改账号登录逻辑，增加后台管理的登录限制，解决使用分诊台账号也能登录后台的问题；
2. 增加叫号器的IP检查，所有叫号器的IP不能相同；
3. 增加取号机打印小票的功能，支持以刷卡、无卡、预约等形式取号。

### 2017-08-25

1. 增加schedule、schedule_temp、import_config三张表
2. 修改workers表，增加source字段

### 2017-08-24

1. 增加排班管理功能，支持导入排班、手动添加排班等操作，可以管理和显示队列上班状况；
2. 将医生管理从分诊台管理中分离出来单独管理；
3. 修改队列选择可登陆医生的功能，支持按照科室添加医生以及模糊查询后添加医生等操作；
4. 增加取号机的终端管理功能，支持查询、修改、删除取号机等功能